document.addEventListener("DOMContentLoaded",async()=>{const navbarContainer=document.getElementById("navbar-container");if(!navbarContainer)return;navbarContainer.innerHTML=`\n        <nav class="navbar navbar-expand-lg navbar-light bg-white shadow-sm fixed-top">\n            <div class="container">\n                <a class="navbar-brand" href="index.html"><strong>Stage</strong>Connect</a>\n                <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">\n                    <span class="navbar-toggler-icon"></span>\n                </button>\n                <div class="collapse navbar-collapse" id="navbarNav">\n                    <ul class="navbar-nav ms-auto"></ul>\n                </div>\n            </div>\n        </nav>\n    `;const token=localStorage.getItem("auth_token");const navbarNav=navbarContainer.querySelector(".navbar-nav");if(token){try{const response=await fetch("/api/auth/me",{headers:{Authorization:`Bearer ${token}`,Accept:"application/json"}});if(response.ok){const user=await response.json();navbarNav.innerHTML=`\n                    <li class="nav-item">\n                        <a class="nav-link" href="index.html">Accueil</a>\n                    </li>\n                    <li class="nav-item">\n                        <a class="nav-link" href="offres-stage.html">Offres de Stage</a>\n                    </li>\n                    <li class="nav-item">\n                        <a class="nav-link" href="dashboard.html">Dashboard</a>\n                    </li>\n                    <li class="nav-item">\n                        <a class="nav-link" href="faq.html">FAQ</a>\n                    </li>\n                    <li class="nav-item dropdown">\n                        <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">\n                            <i class="fas fa-user-circle me-1"></i> ${user.name}\n                        </a>\n                        <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="navbarDropdown">\n                            <li><a class="dropdown-item" href="#">Profil</a></li>\n                            <li><a class="dropdown-item" href="#">Paramètres</a></li>\n                            <li><hr class="dropdown-divider"></li>\n                            <li><a class="dropdown-item" href="#" id="logoutBtn">Déconnexion</a></li>\n                        </ul>\n                    </li>\n                `;document.getElementById("logoutBtn").addEventListener("click",async()=>{try{await fetch("/api/auth/logout",{method:"POST",headers:{Authorization:`Bearer ${token}`,Accept:"application/json"}})}finally{localStorage.removeItem("auth_token");window.location.href="login.html"}})}else{showDefaultNavbar(navbarNav)}}catch(error){console.error("Error fetching user data:",error);showDefaultNavbar(navbarNav)}}else{showDefaultNavbar(navbarNav)}});function showDefaultNavbar(navbarNav){navbarNav.innerHTML=`\n        <li class="nav-item">\n            <a class="nav-link" href="index.html">Accueil</a>\n        </li>\n        <li class="nav-item">\n            <a class="nav-link" href="offres-stage.html">Offres de Stage</a>\n        </li>\n        <li class="nav-item">\n            <a class="nav-link" href="about.html">À propos</a>\n        </li>\n        <li class="nav-item">\n            <a class="nav-link" href="faq.html">FAQ</a>\n        </li>\n        <li class="nav-item">\n            <a class="nav-link" href="contact.html">Contact</a>\n        </li>\n        <li class="nav-item ms-lg-3">\n            <a class="btn btn-outline-primary" href="login.html">Connexion</a>\n        </li>\n        <li class="nav-item ms-lg-2">\n            <a class="btn btn-primary" href="signup.html">Inscription</a>\n        </li>\n    `}